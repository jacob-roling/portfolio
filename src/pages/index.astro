---
import Base from "#/layouts/Base.astro";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import jacobRolingImage from "#/assets/jacob-roling.webp";
import { experience, education, skills } from "#/data";
import { getCollection } from 'astro:content';


const projects = await getCollection('articles', ({data}) => data.tags.includes("Project"));

const latestPosts = (await getCollection('articles')).sort((a, b) => b.data.datePublished.getTime() - a.data.datePublished.getTime());

const dateFormatter = new Intl.DateTimeFormat('en-AU', {
  year: 'numeric',
  month: 'short'
});
---

<Base>
  <Fragment slot="head">
    <title>Jacob Roling â€” Software Engineer</title>
    <meta name="description" content="Jacob Roling is a software engineer based in South Australia, he is an experienced web and backend developer with a high proficiency in HTML, JavaScript, CSS, Rust, Go and accessibility.">
  </Fragment>

  <main class="container typography text-[1.125rem] pt-24 print:pt-0">
    <div class="grid grid-cols-3 gap-8">
      <div class="col-span-3 md:col-span-2">
        <h1 id="jacob-roling" class="print:text-[2rem]">Jacob Roling</h1>
        <p>
          Software engineer focused on building products with simplicity and accessibility in mind.
        </p>
        <ul role="list">
          <li class="hidden print:block">
            <Icon class="inline" name="heroicons:globe-alt" aria-hidden="true" />
            <span class="sr-only">My website is </span>
            <a href={Astro.site}>{Astro.site}</a>
          </li>
          <li>
            <Icon class="inline" name="heroicons:map-pin" aria-hidden="true" />
            <span class="sr-only">I am located in </span>
            Adelaide, South Australia<span class="sr-only">.</span>
          </li>
        </ul>
      </div>
      <div class="hidden md:block">
        <Image
          class="ml-auto"
          src={jacobRolingImage}
          alt="Jacob Roling"
          height={200}
        />
      </div>
    </div>
    <h2 id="about">About Me</h2>
    <p>
      Hi, I have been teaching myself to code since I was 12 and for the past 6
      years, focused heavily on full-stack software engineering. My strength
      lies in learning quickly and focusing on fundamentals so I may apply my
      knowledge to a variety of subjects. My ambition is to use my experience to
      create value by solving problems with solutions that are simple, reliable
      and efficient as possible.
    </p>
    <h2 id="skills">Skills</h2>
    <ul class="flex flex-wrap gap-2 print:hidden" role="list">{skills.map(skill => <li class="badge">{skill}</li>)}</ul>
    <p class="hidden print:block">
      {skills.join(', ')}
    </p>
    <h2 id="work-experience">Work Experience</h2>
    <div>
      {
        experience.map(({ company, role, remote, description, date }) => (
          <div>
            <div class="flex justify-between gap-8">
              <div class="hgroup">
                <h3>
                  {company} {remote ? <span class="badge print:!hidden print:!text-[1em]">Remote</span><span class="hidden print:inline">(remote)</span> : null}
                </h3>
                <p>{role}</p>
              </div>
              <div class="mt-[1em]">
                <time datetime={date.started.toISOString()}>{dateFormatter.format(date.started)}</time>
                <span>-</span>
                {date.ended ? <time datetime={date.ended.toISOString()}>{dateFormatter.format(date.ended)}</time> : <span>Present</span>}
              </div>
            </div>
            <p>{description ? description : null}</p>
          </div>
        ))
      }
    </div>
    <h2 id="education">Education</h2>
    <div>
      {
        education.map(({ institution, qualifiation, highlights, dateCompleted }) => (
          <div>
            <div class="flex justify-between gap-8">
              <div class="hgroup">
                <h3>{qualifiation}</h3>
                <p>{institution}</p>
              </div>
              <div class="mt-[1em]">
                {dateCompleted ? <time datetime={dateCompleted.toISOString()}>{dateCompleted.getFullYear()}</time> : null}
              </div>
            </div>
            <p>{highlights}</p>
          </div>
        ))
      }
    </div>
    <h2 id="projects" class="print:hidden">Projects</h2>
    <div class="grid print:hidden grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {projects.map(({ slug, data: { title, description } }) => <article class="relative p-4 border rounded bg-neutral-background-subtle hover:border-neutral-border-hover hover:bg-neutral-background-element transition-colors">
        <header>
          <a href={`/blog/${slug}`}>
            <h3>{title}</h3>
            <span class="expand-to-relative"></span>
          </a>
        </header>
        <p class="line-clamp-3">
          {description}
        </p>
      </article>)}
    </div>
    <h2 id="latest-posts" class="print:hidden">Latest Posts</h2>
    <div class="print:hidden">
      {latestPosts.map(({slug, data: {title}}) => <div class="relative">
          <a href={`/blog/${slug}`}>
            <h3>{title}</h3>
            <span class="expand-to-relative"></span>
          </a>
      </div>)}
    </div>
  </main>
</Base>
